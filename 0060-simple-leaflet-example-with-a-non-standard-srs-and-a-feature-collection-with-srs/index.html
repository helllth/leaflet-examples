<!DOCTYPE html>
<html>

<head>
	<title>0060-simple-leaflet-example-with-a-non-standard-srs-and-a-feature-collection-with-srs City Hall Wuppertal</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="shortcut icon" type="image/x-icon" href="https://github.com/apple-touch-icon-72x72.png" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.1/dist/leaflet.css" />
	<script src="https://unpkg.com/leaflet@1.0.1/dist/leaflet.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.12/proj4.js"></script>
	<script src="https://cdn.rawgit.com/kartena/Proj4Leaflet/leaflet-proj-refactor/src/proj4leaflet.js"></script>
	<script src="https://cdn.rawgit.com/heigeo/leaflet.wms/gh-pages/leaflet.wms.js"></script>

</head>

<body>

	<!-- do not use in production. for learning purpose only -->

	<div id="mapid" style="width: 600px; height: 600px;"></div>
	<script>
		// Proj4js EPSG:25832 definition
		var proj4rs25832def = '+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs';

		// Calc origin
		var origin = proj4(
			proj4rs25832def,
			// Upper left corner of the tile origin based on the WMTSCapabilities layer BBox
			[0.105946948013, 56.8478734515]
		);

		// Set resolutions
		var resolutions = [17471320.7509, 8735660.37545, 4367830.18772, 2183915.09386, 1091957.54693, 545978.773466, 272989.386733, 136494.693366, 68247.3466832, 34123.6733416, 17061.8366708, 8530.9183354, 4265.4591677, 2132.72958385, 1066.364792,
			533.182396, 266.591198, 133.295599, 66.6477995, 33.32389975
		];

		// Define CRS
		var rs25832 = new L.Proj.CRS(
			'EPSG:25832',
			proj4rs25832def, {
				origin: [origin[0], origin[1]],
				resolutions: resolutions.map(function(value) {
					return value * 0.00028;
				})
			}
		);
		var osmWmsLayer = L.tileLayer.wms('http://ows.terrestris.de/osm/service', {
			layers: 'OSM-WMS',
			format: 'image/png',
			transparent: true,
			version: '1.1.1',
			opacity: 0.7
		});

		var nrwOrthoLayer = L.tileLayer.wms('http://www.wms.nrw.de/geobasis/wms_nw_dop40', {
			layers: 'WMS_NW_DOP40',
			format: 'image/png',
			transparent: true,
			opacity: 0.4,
		});

		var hnr = L.WMS.overlay("http://geoportal.wuppertal.de:80/deegree/wms", {
			'transparent': true,
			'format': 'image/png',
			'layers': 'R102:stadtgrundkarte_hausnr',
		});


		var fc25832 = {
			"features": [{
				"type": "Feature",
				"geometry": {
					"type": "Polygon",
					"coordinates": [
						[
							[374374.44496824965, 5681668.141103344],
							[374373.56363822147, 5681670.3982774764],
							[374370.3864017278, 5681678.5386607442],
							[374369.84194113314, 5681679.9327761475],
							[374368.75861217082, 5681682.707541707],
							[374364.58806118742, 5681693.39535087],
							[374357.34989813343, 5681711.9304025546],
							[374362.02178449556, 5681722.2671275716],
							[374367.85203286633, 5681724.5371555928],
							[374370.60564308241, 5681725.610275846],
							[374398.67506117374, 5681736.5415396178],
							[374419.24566970393, 5681744.552331944],
							[374426.24879226089, 5681741.4065584457],
							[374435.03925989941, 5681718.4447957855],
							[374432.84919582307, 5681713.375438069],
							[374431.37646586448, 5681717.1660990082],
							[374427.15948894992, 5681728.0507025123],
							[374423.44360609353, 5681737.6362369135],
							[374416.3682115525, 5681740.7288646149],
							[374408.7560755983, 5681737.75935382],
							[374367.79229640588, 5681721.8012160538],
							[374363.24686862528, 5681711.49434835],
							[374369.57695306092, 5681695.2453957889],
							[374378.45250927284, 5681672.5008796752],
							[374388.79851390421, 5681667.87650333],
							[374381.56089483574, 5681665.1736236112],
							[374376.58572147787, 5681667.249051013],
							[374374.44496824965, 5681668.141103344]
						]
					]
				},
				'crs': {
					'type': 'name',
					'properties': {
						'name': 'urn:ogc:def:crs:EPSG::25832'
					}
				},
				"properties": {}
			}],
			"type": "FeatureCollection"
		}

		//no crs information = wgs84 = 4326
		var rathaus = {
			"type": "MultiPolygon",
			"coordinates": [
				[
					[
						[7.2011845118023, 51.273018906277265],
						[7.201285946060973, 51.27290805213547],
						[7.201506902293482, 51.272666621004099],
						[7.201522995605308, 51.27264917898087],
						[7.20136251240798, 51.272648709431927],
						[7.201046429969554, 51.272643492107214],
						[7.200962697677781, 51.272641413766067],
						[7.200764050350485, 51.272637991629608],
						[7.200701302583774, 51.272640804135342],
						[7.200652594356847, 51.272644255109171],
						[7.200604145579802, 51.272648771229896],
						[7.200584240991791, 51.27265110018962],
						[7.20059242753808, 51.272633482779661],
						[7.200673130113247, 51.272462111039857],
						[7.200851456320373, 51.272081425058168],
						[7.200836499361341, 51.272078218454268],
						[7.200822080931487, 51.27206930055354],
						[7.200721253546945, 51.272043910095618],
						[7.200722643363514, 51.272042096880341],
						[7.200620540825747, 51.272017055447407],
						[7.200577711467693, 51.272006558629158],
						[7.200520990069365, 51.272095859811088],
						[7.20043711744245, 51.272074650735391],
						[7.200376696823823, 51.272059386860754],
						[7.200381150351794, 51.272052548680541],
						[7.200393412577287, 51.272033725929028],
						[7.200399192014745, 51.272024875707224],
						[7.200363331137005, 51.272015825914167],
						[7.200313543665892, 51.272003252539037],
						[7.200325776897875, 51.271984438341619],
						[7.200320009640611, 51.271982703939315],
						[7.200337081711354, 51.271954161728189],
						[7.200279675302625, 51.271939546681196],
						[7.200292122469803, 51.271920394041103],
						[7.200287040789612, 51.271919092851434],
						[7.200072536935118, 51.271864399200595],
						[7.20006534041118, 51.271862552876009],
						[7.200052418584701, 51.27188174315841],
						[7.199995139906748, 51.271867165907061],
						[7.199977324113711, 51.271898592391125],
						[7.199970685679806, 51.271896772629532],
						[7.19995732451989, 51.271912529796829],
						[7.199909971914933, 51.271900389387874],
						[7.199871689240966, 51.271890582754061],
						[7.199849661633084, 51.271925226902589],
						[7.199791305980735, 51.271910327224425],
						[7.199718712487289, 51.271891800163928],
						[7.199709982597976, 51.271889570511192],
						[7.199749328559605, 51.271827062526725],
						[7.199708407318948, 51.271816540777785],
						[7.199605060326281, 51.271789986466189],
						[7.19960185773068, 51.271793795218564],
						[7.199386178455344, 51.271738398749179],
						[7.199316051771222, 51.271845263385721],
						[7.199306249187509, 51.271860202901422],
						[7.199289814346798, 51.271885265469464],
						[7.199280056838373, 51.271900151718206],
						[7.199179302327616, 51.272053686590148],
						[7.198996814774116, 51.272331830370518],
						[7.198990488284623, 51.272341463494335],
						[7.198982087842582, 51.272370768457748],
						[7.198986945416348, 51.272397597498049],
						[7.199001799140707, 51.272423240386289],
						[7.199024331000352, 51.272446114648702],
						[7.199076248418685, 51.272486347963394],
						[7.19920614683476, 51.272587009200322],
						[7.199231981395916, 51.272604988061943],
						[7.199249760716581, 51.272616314042082],
						[7.199288732213745, 51.27263784940407],
						[7.199343250080439, 51.272662186936557],
						[7.199410536893891, 51.272687026638181],
						[7.19946321841494, 51.272701497479041],
						[7.199952272345739, 51.272810613951904],
						[7.200118720537517, 51.272847760840662],
						[7.200746475013191, 51.2729872988427],
						[7.200747853972844, 51.272985764244524],
						[7.201097634825324, 51.27311383256859],
						[7.2011845118023, 51.273018906277265]
					]
				]
			]
		}
		var fc84 = {
			"type": "FeatureCollection",
			"features": [
				rathaus
			]
		};

		var featureLayerWGS84 = L.geoJson(fc84); // same result with L.Proj.geoJson(fc84);
		var featureLayerETR89 = L.Proj.geoJson(fc25832);

		var mymap = L.map('mapid', {
			crs: rs25832,
			center: [51.272208, 7.199927],
			zoom: 13,
			maxZoom: resolutions.length,
			layers: [osmWmsLayer, nrwOrthoLayer, hnr, featureLayerETR89,featureLayerWGS84],
			center: [51.272399, 7.199712],
		});
	</script>
</body>

</html>
